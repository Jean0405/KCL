CREATE DATABASE kclDB;

USE kclDB;

CREATE TABLE products(
    id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(80) NOT NULL,
    description TEXT NOT NULL,
    price INT NOT NULL,
    img VARCHAR(250) NOT NULL,
    stars INT NOT NULL,
    promo INT
);

CREATE TABLE customer(
    id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    whatsapp VARCHAR(10) NOT NULL UNIQUE,
    depta VARCHAR(23) NOT NULL,
    city VARCHAR(30) NOT NULL,
    address VARCHAR(50) NOT NULL,
    postal_code INT NOT NULL,
    description VARCHAR(200),
    full_name VARCHAR(60) NOT NULL,
    cc VARCHAR(10) NOT NULL,
    creation_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE `order`(
    id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    idCustomer INT NOT NULL,
    idProduct INT NOT NULL,
    cant INT NOT NULL,
    total_price INT NOT NULL,
    CONSTRAINT `order_customer_foreign` FOREIGN KEY(`idCustomer`) REFERENCES `customer`(`id`) ON UPDATE CASCADE ON DELETE CASCADE,
    CONSTRAINT `order_product_foreign` FOREIGN KEY(`idProduct`) REFERENCES `products`(`id`) ON UPDATE CASCADE ON DELETE CASCADE
);

INSERT INTO customer (whatsapp, depta, city, address, postal_code, description, full_name, cc) VALUES(
    "3238884307", "Santander", "Lebrija","calle11·10-44",  625421, "Dos casa despues de la panaderia famosa", "Carlos Villafrades", "1002336565"
);

INSERT INTO products (name, description, price, img, stars, promo) VALUES ("Aceite de Aguacate", "Lorem, ipsum dolor sit amet consectetur adipisicing elit. Aut, ab ipsa, placeat ut distinctio veniam qui natus voluptates iste molestias nisi? Corrupti nemo explicabo ex ipsum, veritatis doloremque a repellendus sequi, cumque odio beatae eius enim doloribus nisi rerum magni? Dicta dolorem ducimus mollitia vero voluptatibus distinctio blanditiis adipisci, molestiae corrupti repudiandae illo modi rerum natus quia praesentium nesciunt quae placeat est excepturi illum autem laudantium? Illum porro asperiores tempora voluptates. Labore suscipit sunt animi exercitationem doloremque, cumque sint. Ad deserunt odit dicta consequatur. Iste dolorem cumque eum dolores autem cupiditate quisquam totam laborum accusantium nobis reiciendis omnis at iure, mollitia quo possimus pariatur! Iure molestiae culpa obcaecati enim odit optio? Esse unde obcaecati perspiciatis nam velit dicta voluptatum, sed nulla voluptatibus reiciendis quas numquam quidem, fuga incidunt dignissimos, cum debitis libero? Aut mollitia tempora ipsam repudiandae amet fuga inventore dicta, voluptatem reprehenderit nesciunt ipsa odio eveniet hic ullam ad similique deleniti ut. Placeat non nihil quisquam voluptatibus, quibusdam iusto, odit repudiandae blanditiis perspiciatis veritatis sed quod minus provident officia aspernatur. Excepturi quae ab impedit deleniti id beatae nisi pariatur, dolor rem natus quos saepe architecto dolorem at fugiat quidem provident illo vitae deserunt distinctio, autem dicta repudiandae, error voluptas.", 15000, "https://www.fusionselvatica.com/cdn/shop/products/ACEITEDEAGUACATE.jpg?v=1670309403&width=700", 4, 50), ("Aceite de Árbol de Té", "Lorem, ipsum dolor sit amet consectetur adipisicing elit. Aut, ab ipsa, placeat ut distinctio veniam qui natus voluptates iste molestias nisi? Corrupti nemo explicabo ex ipsum, veritatis doloremque a repellendus sequi, cumque odio beatae eius enim doloribus nisi rerum magni? Dicta dolorem ducimus mollitia vero voluptatibus distinctio blanditiis adipisci, molestiae corrupti repudiandae illo modi rerum natus quia praesentium nesciunt quae placeat est excepturi illum autem laudantium? Illum porro asperiores tempora voluptates. Labore suscipit sunt animi exercitationem doloremque, cumque sint. Ad deserunt odit dicta consequatur. Iste dolorem cumque eum dolores autem cupiditate quisquam totam laborum accusantium nobis reiciendis omnis at iure, mollitia quo possimus pariatur! Iure molestiae culpa obcaecati enim odit optio? Esse unde obcaecati perspiciatis nam velit dicta voluptatum, sed nulla voluptatibus reiciendis quas numquam quidem, fuga incidunt dignissimos, cum debitis libero? Aut mollitia tempora ipsam repudiandae amet fuga inventore dicta, voluptatem reprehenderit nesciunt ipsa odio eveniet hic ullam ad similique deleniti ut. Placeat non nihil quisquam voluptatibus, quibusdam iusto, odit repudiandae blanditiis perspiciatis veritatis sed quod minus provident officia aspernatur. Excepturi quae ab impedit deleniti id beatae nisi pariatur, dolor rem natus quos saepe architecto dolorem at fugiat quidem provident illo vitae deserunt distinctio, autem dicta repudiandae, error voluptas.", 92000, "https://www.fusionselvatica.com/cdn/shop/products/ACEITEDEARBOLDETE.jpg?v=1670310241&width=600", 5, 10), ("Alisador de Algas Marinas Cabello Decolorado 250 ml", "Lorem, ipsum dolor sit amet consectetur adipisicing elit. Aut, ab ipsa, placeat ut distinctio veniam qui natus voluptates iste molestias nisi? Corrupti nemo explicabo ex ipsum, veritatis doloremque a repellendus sequi, cumque odio beatae eius enim doloribus nisi rerum magni? Dicta dolorem ducimus mollitia vero voluptatibus distinctio blanditiis adipisci, molestiae corrupti repudiandae illo modi rerum natus quia praesentium nesciunt quae placeat est excepturi illum autem laudantium? Illum porro asperiores tempora voluptates. Labore suscipit sunt animi exercitationem doloremque, cumque sint. Ad deserunt odit dicta consequatur. Iste dolorem cumque eum dolores autem cupiditate quisquam totam laborum accusantium nobis reiciendis omnis at iure, mollitia quo possimus pariatur! Iure molestiae culpa obcaecati enim odit optio? Esse unde obcaecati perspiciatis nam velit dicta voluptatum, sed nulla voluptatibus reiciendis quas numquam quidem, fuga incidunt dignissimos, cum debitis libero? Aut mollitia tempora ipsam repudiandae amet fuga inventore dicta, voluptatem reprehenderit nesciunt ipsa odio eveniet hic ullam ad similique deleniti ut. Placeat non nihil quisquam voluptatibus, quibusdam iusto, odit repudiandae blanditiis perspiciatis veritatis sed quod minus provident officia aspernatur. Excepturi quae ab impedit deleniti id beatae nisi pariatur, dolor rem natus quos saepe architecto dolorem at fugiat quidem provident illo vitae deserunt distinctio, autem dicta repudiandae, error voluptas.", 78000, "https://www.fusionselvatica.com/cdn/shop/products/ALISADORDECOLORADO250_79743541-bf2b-4788-b7e2-d0d5b20dffba.png?v=1680708541&width=600", 4,50);


INSERT INTO products (name, description, price, img, stars) VALUES ("Acondicionador Capilar de Chocolate 300 ml", "Lorem, ipsum dolor sit amet consectetur adipisicing elit. Aut, ab ipsa, placeat ut distinctio veniam qui natus voluptates iste molestias nisi? Corrupti nemo explicabo ex ipsum, veritatis doloremque a repellendus sequi, cumque odio beatae eius enim doloribus nisi rerum magni? Dicta dolorem ducimus mollitia vero voluptatibus distinctio blanditiis adipisci, molestiae corrupti repudiandae illo modi rerum natus quia praesentium nesciunt quae placeat est excepturi illum autem laudantium? Illum porro asperiores tempora voluptates. Labore suscipit sunt animi exercitationem doloremque, cumque sint. Ad deserunt odit dicta consequatur. Iste dolorem cumque eum dolores autem cupiditate quisquam totam laborum accusantium nobis reiciendis omnis at iure, mollitia quo possimus pariatur! Iure molestiae culpa obcaecati enim odit optio? Esse unde obcaecati perspiciatis nam velit dicta voluptatum, sed nulla voluptatibus reiciendis quas numquam quidem, fuga incidunt dignissimos, cum debitis libero? Aut mollitia tempora ipsam repudiandae amet fuga inventore dicta, voluptatem reprehenderit nesciunt ipsa odio eveniet hic ullam ad similique deleniti ut. Placeat non nihil quisquam voluptatibus, quibusdam iusto, odit repudiandae blanditiis perspiciatis veritatis sed quod minus provident officia aspernatur. Excepturi quae ab impedit deleniti id beatae nisi pariatur, dolor rem natus quos saepe architecto dolorem at fugiat quidem provident illo vitae deserunt distinctio, autem dicta repudiandae, error voluptas.", 210000, "https://www.fusionselvatica.com/cdn/shop/products/ACONDICIONADOR300_e6091425-6dcf-43d2-bfe2-a3da1b0499ad.png?v=1680708362&width=600", 5),
("Bálsamo Labial Orgánico", "Lorem, ipsum dolor sit amet consectetur adipisicing elit. Aut, ab ipsa, placeat ut distinctio veniam qui natus voluptates iste molestias nisi? Corrupti nemo explicabo ex ipsum, veritatis doloremque a repellendus sequi, cumque odio beatae eius enim doloribus nisi rerum magni? Dicta dolorem ducimus mollitia vero voluptatibus distinctio blanditiis adipisci, molestiae corrupti repudiandae illo modi rerum natus quia praesentium nesciunt quae placeat est excepturi illum autem laudantium? Illum porro asperiores tempora voluptates. Labore suscipit sunt animi exercitationem doloremque, cumque sint. Ad deserunt odit dicta consequatur. Iste dolorem cumque eum dolores autem cupiditate quisquam totam laborum accusantium nobis reiciendis omnis at iure, mollitia quo possimus pariatur! Iure molestiae culpa obcaecati enim odit optio? Esse unde obcaecati perspiciatis nam velit dicta voluptatum, sed nulla voluptatibus reiciendis quas numquam quidem, fuga incidunt dignissimos, cum debitis libero? Aut mollitia tempora ipsam repudiandae amet fuga inventore dicta, voluptatem reprehenderit nesciunt ipsa odio eveniet hic ullam ad similique deleniti ut. Placeat non nihil quisquam voluptatibus, quibusdam iusto, odit repudiandae blanditiis perspiciatis veritatis sed quod minus provident officia aspernatur. Excepturi quae ab impedit deleniti id beatae nisi pariatur, dolor rem natus quos saepe architecto dolorem at fugiat quidem provident illo vitae deserunt distinctio, autem dicta repudiandae, error voluptas.", 13500, "https://www.fusionselvatica.com/cdn/shop/products/BALSAMOLABIAL.jpg?v=1670375125&width=600", 4),
("Acondicionador Capilar de Chocolate 300 ml", "Lorem, ipsum dolor sit amet consectetur adipisicing elit. Aut, ab ipsa, placeat ut distinctio veniam qui natus voluptates iste molestias nisi? Corrupti nemo explicabo ex ipsum, veritatis doloremque a repellendus sequi, cumque odio beatae eius enim doloribus nisi rerum magni? Dicta dolorem ducimus mollitia vero voluptatibus distinctio blanditiis adipisci, molestiae corrupti repudiandae illo modi rerum natus quia praesentium nesciunt quae placeat est excepturi illum autem laudantium? Illum porro asperiores tempora voluptates. Labore suscipit sunt animi exercitationem doloremque, cumque sint. Ad deserunt odit dicta consequatur. Iste dolorem cumque eum dolores autem cupiditate quisquam totam laborum accusantium nobis reiciendis omnis at iure, mollitia quo possimus pariatur! Iure molestiae culpa obcaecati enim odit optio? Esse unde obcaecati perspiciatis nam velit dicta voluptatum, sed nulla voluptatibus reiciendis quas numquam quidem, fuga incidunt dignissimos, cum debitis libero? Aut mollitia tempora ipsam repudiandae amet fuga inventore dicta, voluptatem reprehenderit nesciunt ipsa odio eveniet hic ullam ad similique deleniti ut. Placeat non nihil quisquam voluptatibus, quibusdam iusto, odit repudiandae blanditiis perspiciatis veritatis sed quod minus provident officia aspernatur. Excepturi quae ab impedit deleniti id beatae nisi pariatur, dolor rem natus quos saepe architecto dolorem at fugiat quidem provident illo vitae deserunt distinctio, autem dicta repudiandae, error voluptas.", 210000, "https://www.fusionselvatica.com/cdn/shop/products/ACONDICIONADOR300_e6091425-6dcf-43d2-bfe2-a3da1b0499ad.png?v=1680708362&width=600", 4);

INSERT INTO `order` (idCustomer, idProduct, cant, total_price) VALUES(1,5,3,250000), (1,1,2,250000)


/* SELECT c.*, JSON_ARRAYAGG(JSON_OBJECT('id', p.id, 'name', p.name, 'description', p.description, 'price', p.price, 'promo', p.promo)) AS info_order, SUM(o.total_price) AS price_total FROM `order` o INNER JOIN customer c ON idCustomer = c.id INNER JOIN products p ON idProduct = p.id GROUP BY c.id; */
